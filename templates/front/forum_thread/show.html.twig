{% extends 'base.html.twig' %}

{% block title %}Traaavl - {{ forum_thread.title|capitalize }}{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="{{asset('build/app/page/forum.css')}}"/>
{% endblock %}

{% block body %}
<section id="show_thread">
    <h1 class="text-4xl font-bold text-eden">{{ forum_thread.title|capitalize }}</h1>

    <a
    href="{{ path('front_forum_thread_answer_new', {'idThread': forum_thread.id}) }}"
    class="bg-gradient-to-r from-burn-sienna to-grenadier text-white rounded-full py-2 px-4 mt-5 inline-block">Reply</a>
    <a href="{{ path('front_forum') }}" class="inline-block ml-6 hover-underline">Back to list</a>

    {% if(forum_thread.roadtrip) %}
    <div class="bg-white mt-5 border border-silver rounded-lg p-3">
        <p class="mb-5">
            {{ forum_thread.author.username }} used Traaavl to organize his roadtrip, find his route and generate your own!
        </p>

        <a
        class="bg-gradient-to-r from-burn-sienna to-grenadier text-white rounded-full py-2 px-4 mr-3"
        href="{{ path('front_roadtrip_restore', {'ulid': forum_thread.roadtrip.ulid}) }}"
        >
            View
        </a>
    </div>
    {% endif %}

    <div class="row_answer m-w-100 bg-white border border-silver rounded-lg mt-5 p-3">
        <div class="m-w-100 flex items-center justify-between border-b border-silver pb-2">
            <div>
                <p class="font-bold">{{ forum_thread.author.email }}</p>
                <p class="text-sm text-silver">
                {{ forum_thread.createdAt ? forum_thread.createdAt|date('Y-m-d H:i:s') : '' }}
                {{ forum_thread.updatedAt and forum_thread.updatedAt|date('Y-m-d H:i:s') > forum_thread.createdAt|date('Y-m-d H:i:s') ?
                    "(Edited)"
                : '' }}
                </p>
            </div>
            <div class="flex items-center">
                <a
                href="{{ path('front_forum_thread_edit', {'id': forum_thread.id}) }}"
                class="bg-gradient-to-r from-burn-sienna to-grenadier text-white rounded-full py-2 px-4 mr-3"
                >Edit</a>
                {{ include('front/forum_thread/_delete_form.html.twig') }}
            </div>
        </div>
        <div class="m-w-100 mt-3">
            {{ forum_thread.description|raw }}
        </div>
    </div>

    {% for answer in forum_thread_answers %}
    <div class="row_answer m-w-100 bg-white border border-silver rounded-lg mt-5 p-3">
        <div class="m-w-100 flex items-center justify-between border-b border-silver pb-2">
            <div>
                <p class="font-bold">{{ answer.author.email }}</p>
                <p class="text-sm text-silver">
                {{ answer.createdAt ? answer.createdAt|date('Y-m-d H:i:s') : '' }}
                </p>
            </div>
            <div class="flex items-center">
                <a
                href="{{ path('front_forum_thread_answer_edit', {'id': answer.id, 'idThread': forum_thread.id}) }}"
                class="bg-gradient-to-r from-burn-sienna to-grenadier text-white rounded-full py-2 px-4 mr-3"
                >Edit</a>
            </div>
        </div>
        <div class="m-w-100 mt-3">
            {{ answer.content|raw }}
        </div>
    </div>
    {% endfor %}

    <div class="m-w-100 flex justify-center items-center mt-5">
        <a href="" class="bg-eden rounded-full text-white px-3 py-1">1</a>
    </div>
</section>
{% endblock %}
