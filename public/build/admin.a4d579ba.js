(self.webpackChunk=self.webpackChunk||[]).push([[328],{74819:(t,e,n)=>{"use strict";n(89554),n(54747),n(19755),n(23243),n(28),n(80682);var a=n(19755);document.getElementsByTagName("select").forEach((function(t){return a(t).select2()})),document.querySelectorAll(".dropdown-section button").forEach((function(t){t.addEventListener("click",(function(e){console.log(e),t.parentNode.parentNode.querySelector(".dropdown-menu").classList.toggle("hidden")}))}))},28:(t,e,n)=>{"use strict";n(82772),n(40561),n(54678),n(73210);var a=n(9669),o=n.n(a),r=n(80129),i=n.n(r);function c(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var d,u,s,g,m,f,y,p,v,b,E,h=document.getElementById("activity-list"),I=[],B=[],L=[],A=!1;if(h){document.getElementById("show_thread")&&(A=!0),v=document.getElementById("map-container").getAttribute("data-departure"),b=document.getElementById("map-container").getAttribute("data-arrival"),A||(u=document.getElementById("rayon").value,document.getElementById("city").addEventListener("change",(function(t){s=t.target.value,H()})),document.getElementById("rayon").addEventListener("change",(function(t){u=t.target.value,H()})),document.getElementById("category").addEventListener("change",(function(t){g=t.target.value,H()})),document.getElementById("generator-submit").addEventListener("click",(function(t){M()})));var w=new google.maps.Geocoder;w.geocode({address:v}).then((function(t){m=t.results[0].geometry.location.lat(),f=t.results[0].geometry.location.lng(),w.geocode({address:b}).then((function(t){y=t.results[0].geometry.location.lat(),p=t.results[0].geometry.location.lng(),k()}))}))}var k=function(){var t=document.getElementsByClassName("btn-listing");if(t){var e,n=c(t);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=a.getAttribute("data-index");S(r),a.click()}}catch(t){n.e(t)}finally{n.f()}}A||o().post("/api/activities/",i().stringify({fromLongitude:f,fromLatitude:m,toLongitude:p,toLatitude:y,rayon:u,city:s,category:g})).then((function(t){for(var e in x(),t.data)C(t.data[e])})).catch((function(t){console.log(t)}))},M=function(){var t,e=[],n=c(E.routes[0].waypoint_order);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.push(L[a])}}catch(t){n.e(t)}finally{n.f()}o().post("/api/roadtrip/",i().stringify({departure:v,arrival:b,activities:e})).then((function(t){window.location.href="/roadtrip/".concat(t.data.ulid,"/details")}))},C=function(t){null==document.getElementById("listing-".concat(t.id))&&o().get("/api/activities/".concat(t.id)).then((function(e){h.insertAdjacentHTML("beforeend",e.data.html),S(t.id),T({id:t.id,position:{lat:e.data.data.latitude,lng:e.data.data.longitude},icon:e.data.data.marker,map:d})}))},S=function(t){document.getElementById("btn-"+t).addEventListener("click",(function(t){var e=t.target.getAttribute("data-index");"+"===t.target.innerHTML.trim()?(document.getElementById("listing-".concat(e)).classList.remove("listing"),L.push(e),O(t),q(t)):(document.getElementById("listing-".concat(e)).classList.add("listing"),L.splice(L.indexOf("".concat(e)),1),F(t),j(t)),x()}))},x=function(){var t=new google.maps.DirectionsService,e=new google.maps.DirectionsRenderer;d=new google.maps.Map(document.getElementById("map"),{center:{lat:48.866667,lng:2.33}}),e.setMap(d),calculateAndDisplayRoute(t,e);for(var n=0;n<I.length;n++)null!=I[n]&&I[n].setMap(d);console.log(L)},N=function(t){var e=new google.maps.Marker(t);return e.addListener("click",(function(){D();var t=document.getElementById("listing-".concat(e.id));t.classList.add("bg-gray-200"),t.scrollIntoView({behavior:"smooth"}),d.setZoom(8),d.setCenter(e.getPosition())})),e},D=function(){var t,e=c(document.getElementsByClassName("listing"));try{for(e.s();!(t=e.n()).done;){t.value.classList.remove("bg-gray-200")}}catch(t){e.e(t)}finally{e.f()}},T=function(t){var e=N(t);I[t.id]=e},F=function(t){var e=document.getElementById(t.target.id);e.innerHTML="+",e.classList.toggle("bg-green-500"),e.classList.toggle("bg-carnation"),I[t.target.getAttribute("data-index")]=N({position:{lat:parseFloat(t.target.getAttribute("data-latitude")),lng:parseFloat(t.target.getAttribute("data-longitude"))},icon:t.target.getAttribute("data-marker"),map:d})},O=function(t){var e=document.getElementById(t.target.id);e.innerHTML="-",e.classList.toggle("bg-green-500"),e.classList.toggle("bg-carnation"),I[t.target.getAttribute("data-index")]=null},q=function(t){B.push({location:{lat:parseFloat(t.target.getAttribute("data-latitude")),lng:parseFloat(t.target.getAttribute("data-longitude"))}})},j=function(t){var e=parseFloat(t.target.getAttribute("data-latitude")),n=parseFloat(t.target.getAttribute("data-longitude"));for(var a in B)if(B[a].location.lat==e&&B[a].location.lng==n){B.splice(a,1);break}},H=function(){for(var t=document.getElementsByClassName("listing");t[0];)I[t[0].getAttribute("data-index")]=null,t[0].parentNode.removeChild(t[0]);k()};window.calculateAndDisplayRoute=function(t,e){t.route({origin:{query:document.getElementById("map-container").getAttribute("data-departure")},waypoints:B,optimizeWaypoints:!0,destination:{query:document.getElementById("map-container").getAttribute("data-arrival")},travelMode:google.maps.TravelMode.DRIVING},(function(t,n){E=t,"OK"===n?e.setDirections(t):window.alert("Directions request failed due to "+n)}))},document.getElementById("clipboard").addEventListener("click",(function(){document.getElementById("copy").select(),document.execCommand("copy"),document.getElementById("clipboard-icon").classList.add("bg-pastel-green"),document.getElementById("clipboard-icon").classList.remove("bg-gigas"),document.getElementById("copy").classList.add("border-pastel-green"),document.getElementById("copy").classList.remove("border-gigas")}))},24654:()=>{}},t=>{"use strict";t.O(0,[730,483,469,177],(()=>{return e=74819,t(t.s=e);var e}));t.O()}]);